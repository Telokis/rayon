common_settings:
  c++: 17

local_settings:
  local_build: true
  build_dir: ./.cppan/build
  build:
    generator: Visual Studio 15 2017
    configuration: Debug

root_project: rayon

projects:
  engine:
    type: lib
    static_only: true

    files:
      - Projects/Engine/Source/.*
      - Projects/Engine/Include/.*
      - Dependencies/json/Json.cpp
      - Dependencies/json/Json.h
      - Dependencies/json/Json-forwards.h

    include_directories:
      public:
        - Projects/Engine/Include/
        - Dependencies/json
        - Dependencies/glm/include

    dependencies:
      - pvt.cppan.demo.boost.filesystem: 1.68.0

    post_sources: |
      set_target_properties(${this} PROPERTIES PDB_NAME ${PACKAGE_NAME_LAST})
      set_target_properties(${this} PROPERTIES PDB_OUTPUT_DIRECTORY_DEBUG "${CPPAN_BUILD_OUTPUT_DIR}")

  cli:
    files:
      - Projects/CLI/Source/.*
      - Projects/CLI/Include/.*
      - Projects/Engine/Include/.*
      - Dependencies/json/Json-forwards.h

    include_directories:
      private:
        - Projects/CLI/Include/

    dependencies:
      - engine
      - pvt.cppan.demo.boost.program_options: 1.68.0
      - pvt.cppan.demo.boost.filesystem: 1.68.0

    post_sources: |
      set_target_properties(${this} PROPERTIES PDB_NAME ${PACKAGE_NAME_LAST})
      set_target_properties(${this} PROPERTIES PDB_OUTPUT_DIRECTORY_DEBUG "${CPPAN_BUILD_OUTPUT_DIR}")
